{"ast":null,"code":"// https://stackoverflow.com/questions/20600800/js-client-side-exif-orientation-rotate-and-mirror-jpeg-images/31273162#31273162\nvar orientation = function orientation(file) {\n  return new Promise(function (resolve) {\n    var reader = new window.FileReader();\n\n    reader.onload = function (event) {\n      var view = new DataView(event.target.result);\n\n      if (view.getUint16(0, false) !== 0xffd8) {\n        resolve(-2);\n      }\n\n      var length = view.byteLength;\n      var offset = 2;\n\n      while (offset < length) {\n        var marker = view.getUint16(offset, false);\n        offset += 2;\n\n        if (marker === 0xffe1) {\n          if (view.getUint32(offset += 2, false) !== 0x45786966) {\n            resolve(-1);\n          }\n\n          var little = view.getUint16(offset += 6, false) === 0x4949;\n          offset += view.getUint32(offset + 4, little);\n          var tags = view.getUint16(offset, little);\n          offset += 2;\n\n          for (var i = 0; i < tags; i++) {\n            if (view.getUint16(offset + i * 12, little) === 0x0112) {\n              resolve(view.getUint16(offset + i * 12 + 8, little));\n            }\n          }\n        } else if ((marker & 0xff00) !== 0xff00) break;else offset += view.getUint16(offset, false);\n      }\n\n      resolve(-1);\n    };\n\n    reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n  });\n};\n\nexport default {\n  orientation: orientation\n};","map":null,"metadata":{},"sourceType":"module"}