{"ast":null,"code":"import _regeneratorRuntime from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anon/Documents/VSCode/dapper/src/components/OnePost.js\";\nimport React, { useContext, useState } from 'react';\nimport Identicon from 'identicon.js';\nimport \"../css/Post.css\";\nimport { useHistory } from 'react-router';\nimport { OSMcontext } from '../OSMcontext';\nimport { Link } from 'react-router-dom';\nexport default function OnePost(props) {\n  var _this = this;\n\n  var post = props.post;\n\n  var _useContext = useContext(OSMcontext),\n      tipPost = _useContext.tipPost,\n      follow = _useContext.follow,\n      isFollowedByUser = _useContext.isFollowedByUser,\n      isAccountCreated = _useContext.isAccountCreated,\n      ourSocialMedia = _useContext.ourSocialMedia,\n      account = _useContext.account,\n      maxCharctersInComment = _useContext.maxCharctersInComment;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      allCommentsOnPost = _useState2[0],\n      setAllCommentsOnPost = _useState2[1];\n\n  var history = useHistory();\n\n  var timeConverter = function timeConverter(UNIX_timestamp) {\n    var a = new Date(UNIX_timestamp * 1000);\n    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hours = a.getHours();\n    var minutes = a.getMinutes();\n    var ampm = hours >= 12 ? 'pm' : 'am';\n    hours = hours % 12;\n    hours = hours ? hours : 12; // the hour '0' should be '12'\n\n    minutes = minutes < 10 ? '0' + minutes : minutes;\n    var time = date + ' ' + month + ' ' + year + ' ' + hours + ':' + minutes + ' ' + ampm;\n    return time;\n  };\n\n  var follow0 = function follow0() {\n    var addressAuthor = document.getElementById('popUpPostAuthorID').value;\n\n    if (addressAuthor) {\n      if (isAccountCreated) {\n        follow(addressAuthor);\n      } else {\n        history.push(\"/createProfile\");\n      }\n    }\n  };\n\n  var tipPost0 = function tipPost0() {\n    var tipAmount = document.getElementById('tipAmountBox').value;\n    var postID = document.getElementById('popUpPostId').value;\n\n    if (tipAmount && postID) {\n      tipPost(postID, tipAmount);\n    }\n  };\n\n  var showModel = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var popupContent, popupDate, popupTip, popupPostId, popupPostAuthorID, popupLinkBox, popupMainImg, popupImgBox, popupFollowButton, isFollowed, modal, commentPostId;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              popupContent = document.getElementById(\"popUpContent\");\n              popupDate = document.getElementById(\"popUpDate\");\n              popupTip = document.getElementById(\"popUpTip\");\n              popupPostId = document.getElementById(\"popUpPostId\");\n              popupPostAuthorID = document.getElementById(\"popUpPostAuthorID\");\n              popupLinkBox = document.getElementById(\"popUpLinkBox\");\n              popupMainImg = document.getElementById(\"popUpMainImg\");\n              popupImgBox = document.getElementById(\"popUpImgBox\");\n              popupFollowButton = document.getElementById(\"popUpFollowButton\");\n              _context.next = 11;\n              return isFollowedByUser(post.author);\n\n            case 11:\n              isFollowed = _context.sent;\n\n              if (isFollowed) {\n                popupFollowButton.innerText = \"Followed\";\n                popupFollowButton.disabled = isFollowed;\n              }\n\n              popupContent.innerText = post.content;\n              popupDate.innerText = timeConverter(post.createTime.toNumber());\n              popupTip.innerText = \"Tip: \".concat(window.web3.utils.fromWei(post.tipAmount.toString(), 'Ether'), \" Ether\");\n              popupPostId.value = post.id.toNumber();\n              popupPostAuthorID.value = post.author;\n              popupLinkBox.href = \"#/profile/\".concat(post.author); //this is for hashRoute\n              // popupLinkBox.href = `#/profile/${post.author}`;//this is for Route\n\n              if (post.media) {\n                popupMainImg.className = \"\";\n                popupMainImg.src = \"https://ipfs.infura.io/ipfs/\".concat(post.media);\n              } else {\n                popupMainImg.className = \"d-none\";\n              }\n\n              popupImgBox.src = \"data:image/png;base64,\".concat(new Identicon(post.author, 50).toString());\n              modal = document.getElementById(\"myModal\");\n              modal.style.display = \"block\";\n\n              window.onclick = function (event) {\n                if (event.target === modal) {\n                  modal.style.display = \"none\";\n                  var commentsDiv = document.getElementById(\"commentsDiv\");\n                  commentsDiv.className = \"d-none\";\n                }\n              }; //comments\n\n\n              commentPostId = document.getElementById(\"commentPostId\");\n              commentPostId.innerText = post.id.toNumber();\n\n            case 26:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function showModel() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var commentLoader0 = function commentLoader0(_n) {\n    var commentLoader = document.getElementById(\"commentLoader\");\n    var commentLoaderContent = document.getElementById(\"commentLoaderContent\");\n\n    if (_n) {\n      commentLoader.className = \"\";\n      commentLoaderContent.className = \"d-none\";\n    } else {\n      commentLoader.className = \"d-none\";\n      commentLoaderContent.className = \"\";\n    }\n  };\n\n  var showComments = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var postidForComment, commentsDiv;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              postidForComment = document.getElementById(\"commentPostId\").innerText;\n              commentLoader0(true);\n              commentsDiv = document.getElementById(\"commentsDiv\");\n\n              if (!(commentsDiv.className === \"d-none\")) {\n                _context2.next = 10;\n                break;\n              }\n\n              commentsDiv.className = \"\";\n              _context2.next = 7;\n              return loadComments(postidForComment);\n\n            case 7:\n              commentLoader0(false);\n              _context2.next = 12;\n              break;\n\n            case 10:\n              commentsDiv.className = \"d-none\";\n              commentLoader0(false);\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function showComments() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var commentOnPost = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var postidForComment1, commentTextForComment0, commentTextForComment;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              commentLoader0(true);\n              postidForComment1 = document.getElementById(\"commentPostId\").innerText;\n              commentTextForComment0 = document.getElementById(\"commentTextBox\").value;\n              commentTextForComment = commentTextForComment0.trim();\n\n              if (!commentTextForComment) {\n                _context4.next = 8;\n                break;\n              }\n\n              document.getElementById(\"commentTextBox\").value = \"\";\n              _context4.next = 8;\n              return ourSocialMedia.methods.commentOnPost(postidForComment1, commentTextForComment).send({\n                from: account\n              }).on('transactionHash', function (hash) {}).on('receipt', function (receipt) {}).on('confirmation', /*#__PURE__*/function () {\n                var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(confirmationNumber, receipt) {\n                  return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                    while (1) {\n                      switch (_context3.prev = _context3.next) {\n                        case 0:\n                          _context3.next = 2;\n                          return loadComments(postidForComment1);\n\n                        case 2:\n                          commentLoader0(false);\n\n                        case 3:\n                        case \"end\":\n                          return _context3.stop();\n                      }\n                    }\n                  }, _callee3);\n                }));\n\n                return function (_x, _x2) {\n                  return _ref4.apply(this, arguments);\n                };\n              }()).on('error', function (error, receipt) {\n                console.log('error', error);\n                console.log('receipt', receipt);\n                commentLoader0(false);\n              });\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function commentOnPost() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var loadComments = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id) {\n      var totalComments, commentsOnPost, i, oneComment;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return ourSocialMedia.methods.commentCountOfPost(id).call();\n\n            case 2:\n              totalComments = _context5.sent;\n              document.getElementById(\"commentTotalCount\").innerText = \"Total Comments: \" + totalComments.toNumber();\n              commentsOnPost = [];\n              i = totalComments.toNumber();\n\n            case 6:\n              if (!(i >= 1)) {\n                _context5.next = 14;\n                break;\n              }\n\n              _context5.next = 9;\n              return ourSocialMedia.methods.commentsOf(id, i - 1).call();\n\n            case 9:\n              oneComment = _context5.sent;\n              commentsOnPost.push(oneComment);\n\n            case 11:\n              i--;\n              _context5.next = 6;\n              break;\n\n            case 14:\n              console.log(allCommentsOnPost);\n              _context5.next = 17;\n              return setAllCommentsOnPost(commentsOnPost);\n\n            case 17:\n              console.log(allCommentsOnPost);\n\n            case 18:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function loadComments(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: showModel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card text-white card-has-bg click-col\",\n    style: {\n      backgroundImage: \"url(https://ipfs.infura.io/ipfs/\".concat(post.media, \")\")\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-img-overlay d-flex flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    className: \"card-meta mb-2 mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 29\n    }\n  }, timeConverter(post.createTime.toNumber())), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"card-title mt-0 text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 29\n    }\n  }, post.content)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"media\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"mr-3 rounded-circle\",\n    src: \"data:image/png;base64,\".concat(new Identicon(post.author, 50).toString()),\n    alt: \"\",\n    style: {\n      maxWidth: 50\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"media-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"my-0 text-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 37\n    }\n  }, \"Tip: \", window.web3.utils.fromWei(post.tipAmount.toString(), 'Ether'), \" Ether\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"myModal\",\n    className: \"modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    style: {\n      borderRadius: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"popUpPostId\",\n    className: \"d-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    id: \"popUpMainImg\",\n    style: {\n      maxWidth: '60%',\n      maxHeight: 300,\n      borderRadius: 20\n    },\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-2 text-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    id: \"popUpDate\",\n    className: \"text-warning mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 33\n    }\n  }, \"1\"), /*#__PURE__*/React.createElement(\"h6\", {\n    id: \"popUpTip\",\n    className: \"text-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 33\n    }\n  }, \"1\")), /*#__PURE__*/React.createElement(\"h5\", {\n    id: \"popUpContent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 29\n    }\n  }, \"a\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"d-none\",\n    id: \"popUpPostAuthorID\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"a\", {\n    id: \"popUpLinkBox\",\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    id: \"popUpImgBox\",\n    className: \"rounded-circle mr-2\",\n    src: \"https://cdn0.iconfinder.com/data/icons/user-pictures/100/male-512.png\",\n    alt: \"\\\\\",\n    style: {\n      maxWidth: 50\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"popUpFollowButton\",\n    onClick: follow0,\n    className: \"btn btn-primary mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 29\n    }\n  }, \"Follow \", /*#__PURE__*/React.createElement(\"i\", {\n    className: \"bi bi-person-plus\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 118\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-outline-warning\",\n    type: \"button\",\n    \"data-bs-toggle\": \"dropdown\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 29\n    }\n  }, \"Tip \", /*#__PURE__*/React.createElement(\"i\", {\n    className: \"bi bi-cash\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 117\n    }\n  })), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"dropdown-menu dropdown-menu-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 33\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    id: \"tipAmountBox\",\n    className: \"form-control dropdown-item\",\n    placeholder: \"enter amount in ETH\",\n    min: \"0\",\n    step: \".01\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 38\n    }\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropdown-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: tipPost0,\n    className: \" btn btn-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 68\n    }\n  }, \"Tip\"))))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: showComments,\n    className: \"btn btn-outline-primary mt-3 btn-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 25\n    }\n  }, \" Comments \"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"commentsDiv\",\n    className: \"d-none mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    id: \"commentPostId\",\n    className: \"text-warning mr-2 d-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 29\n    }\n  }, \"0\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    maxLength: maxCharctersInComment,\n    className: \"form-control\",\n    id: \"commentTextBox\",\n    placeholder: \"type comment here...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: commentOnPost,\n    className: \"btn btn-outline-primary\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 33\n    }\n  }, \"Comment\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-none\",\n    id: \"commentLoader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"spinner-border spinner-border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    id: \"commentLoaderContent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    id: \"commentTotalCount\",\n    className: \"text-end text-warning mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 33\n    }\n  }, \".\"), allCommentsOnPost && allCommentsOnPost.map(function (comment, key) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      key: key,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-4 d-flex border border-secondary rounded-3 p-2\",\n      style: {\n        overflow: 'auto'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/profile/\".concat(comment.by),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"data:image/png;base64,\".concat(new Identicon(comment.by, 30).toString()),\n      alt: \"\",\n      className: \"rounded-circle mr-2\",\n      width: \"40\",\n      height: \"40\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 53\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 49\n      }\n    }, comment.comment)));\n  })))))));\n}","map":{"version":3,"sources":["/Users/anon/Documents/VSCode/dapper/src/components/OnePost.js"],"names":["React","useContext","useState","Identicon","useHistory","OSMcontext","Link","OnePost","props","post","tipPost","follow","isFollowedByUser","isAccountCreated","ourSocialMedia","account","maxCharctersInComment","allCommentsOnPost","setAllCommentsOnPost","history","timeConverter","UNIX_timestamp","a","Date","months","year","getFullYear","month","getMonth","date","getDate","hours","getHours","minutes","getMinutes","ampm","time","follow0","addressAuthor","document","getElementById","value","push","tipPost0","tipAmount","postID","showModel","popupContent","popupDate","popupTip","popupPostId","popupPostAuthorID","popupLinkBox","popupMainImg","popupImgBox","popupFollowButton","author","isFollowed","innerText","disabled","content","createTime","toNumber","window","web3","utils","fromWei","toString","id","href","media","className","src","modal","style","display","onclick","event","target","commentsDiv","commentPostId","commentLoader0","_n","commentLoader","commentLoaderContent","showComments","postidForComment","loadComments","commentOnPost","postidForComment1","commentTextForComment0","commentTextForComment","trim","methods","send","from","on","hash","receipt","confirmationNumber","error","console","log","commentCountOfPost","call","totalComments","commentsOnPost","i","commentsOf","oneComment","backgroundImage","maxWidth","borderRadius","maxHeight","map","comment","key","overflow","by"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react'\n\n\n\nimport Identicon from 'identicon.js';\n\nimport \"../css/Post.css\"\nimport { useHistory } from 'react-router';\nimport { OSMcontext } from '../OSMcontext';\nimport { Link } from 'react-router-dom';\n\nexport default function OnePost(props) {\n    const { post } = props;\n\n    const { tipPost, follow, isFollowedByUser, isAccountCreated, ourSocialMedia, account, maxCharctersInComment } = useContext(OSMcontext);\n\n    const [allCommentsOnPost, setAllCommentsOnPost] = useState([])\n\n    const history = useHistory();\n\n    const timeConverter = (UNIX_timestamp) => {\n        var a = new Date(UNIX_timestamp * 1000);\n        var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n        var year = a.getFullYear();\n        var month = months[a.getMonth()];\n        var date = a.getDate();\n        var hours = a.getHours();\n        var minutes = a.getMinutes();\n\n        var ampm = hours >= 12 ? 'pm' : 'am';\n        hours = hours % 12;\n        hours = hours ? hours : 12; // the hour '0' should be '12'\n        minutes = minutes < 10 ? '0' + minutes : minutes;\n\n        var time = date + ' ' + month + ' ' + year + ' ' + hours + ':' + minutes + ' ' + ampm;\n        return time;\n    }\n\n\n    const follow0 = () => {\n\n        const addressAuthor = document.getElementById('popUpPostAuthorID').value;\n        if (addressAuthor) {\n            if (isAccountCreated) {\n                follow(addressAuthor)\n            } else {\n                history.push(\"/createProfile\");\n            }\n        }\n    }\n\n    const tipPost0 = () => {\n\n        const tipAmount = document.getElementById('tipAmountBox').value;\n        const postID = document.getElementById('popUpPostId').value;\n\n        if (tipAmount && postID) {\n            tipPost(postID, tipAmount)\n        }\n    }\n\n    const showModel = async () => {\n        const popupContent = document.getElementById(\"popUpContent\");\n        const popupDate = document.getElementById(\"popUpDate\");\n        const popupTip = document.getElementById(\"popUpTip\");\n        const popupPostId = document.getElementById(\"popUpPostId\");\n        const popupPostAuthorID = document.getElementById(\"popUpPostAuthorID\");\n        const popupLinkBox = document.getElementById(\"popUpLinkBox\");\n        const popupMainImg = document.getElementById(\"popUpMainImg\");\n        const popupImgBox = document.getElementById(\"popUpImgBox\");\n        const popupFollowButton = document.getElementById(\"popUpFollowButton\");\n\n        const isFollowed = await isFollowedByUser(post.author);\n        if (isFollowed) {\n            popupFollowButton.innerText = \"Followed\"\n            popupFollowButton.disabled = isFollowed;\n        }\n\n        popupContent.innerText = post.content;\n        popupDate.innerText = timeConverter(post.createTime.toNumber());\n        popupTip.innerText = `Tip: ${window.web3.utils.fromWei(post.tipAmount.toString(), 'Ether')} Ether`;\n        popupPostId.value = post.id.toNumber();\n        popupPostAuthorID.value = post.author;\n        popupLinkBox.href = `#/profile/${post.author}`;//this is for hashRoute\n        // popupLinkBox.href = `#/profile/${post.author}`;//this is for Route\n        if (post.media) {\n            popupMainImg.className = \"\";\n            popupMainImg.src = `https://ipfs.infura.io/ipfs/${post.media}`;\n        } else {\n            popupMainImg.className = \"d-none\";\n        }\n        popupImgBox.src = `data:image/png;base64,${new Identicon(post.author, 50).toString()}`;\n\n        var modal = document.getElementById(\"myModal\");\n\n        modal.style.display = \"block\";\n\n        window.onclick = function (event) {\n            if (event.target === modal) {\n                modal.style.display = \"none\";\n                const commentsDiv = document.getElementById(\"commentsDiv\");\n                commentsDiv.className = \"d-none\"\n            }\n        }\n\n        //comments\n\n        const commentPostId = document.getElementById(\"commentPostId\");\n        commentPostId.innerText = post.id.toNumber();\n\n    }\n\n    const commentLoader0 = (_n) => {\n        const commentLoader = document.getElementById(\"commentLoader\");\n        const commentLoaderContent = document.getElementById(\"commentLoaderContent\");\n\n\n        if (_n) {\n            commentLoader.className = \"\";\n            commentLoaderContent.className = \"d-none\";\n\n        } else {\n            commentLoader.className = \"d-none\";\n            commentLoaderContent.className = \"\";\n        }\n    }\n\n    const showComments = async () => {\n        const postidForComment = document.getElementById(\"commentPostId\").innerText;\n\n\n        commentLoader0(true);\n\n        const commentsDiv = document.getElementById(\"commentsDiv\");\n        if (commentsDiv.className === \"d-none\") {\n            commentsDiv.className = \"\"\n\n            await loadComments(postidForComment);\n            commentLoader0(false);\n\n        } else {\n            commentsDiv.className = \"d-none\"\n            commentLoader0(false);\n        }\n    }\n\n    const commentOnPost = async () => {\n        commentLoader0(true);\n\n\n        const postidForComment1 = document.getElementById(\"commentPostId\").innerText;\n        const commentTextForComment0 = document.getElementById(\"commentTextBox\").value;\n\n        const commentTextForComment = commentTextForComment0.trim();\n\n        if (commentTextForComment) {\n\n            document.getElementById(\"commentTextBox\").value = \"\";\n\n            await ourSocialMedia.methods.commentOnPost(postidForComment1, commentTextForComment)\n                .send({ from: account })\n                .on('transactionHash', (hash) => {\n                })\n                .on('receipt', (receipt) => {\n                })\n                .on('confirmation', async (confirmationNumber, receipt) => {\n\n                    await loadComments(postidForComment1);\n                    commentLoader0(false);\n\n                })\n                .on('error', (error, receipt) => {\n                    console.log('error', error)\n                    console.log('receipt', receipt)\n\n                    commentLoader0(false);\n\n                });\n        }\n\n    }\n\n    const loadComments = async (id) => {\n\n        const totalComments = await ourSocialMedia.methods.commentCountOfPost(id).call();\n        document.getElementById(\"commentTotalCount\").innerText = \"Total Comments: \"+totalComments.toNumber();\n\n        let commentsOnPost = [];\n        for (var i = totalComments.toNumber(); i >= 1; i--) {\n            let oneComment = await ourSocialMedia.methods.commentsOf(id, i - 1).call();\n            commentsOnPost.push(oneComment);\n        }\n\n        console.log(allCommentsOnPost);\n        await setAllCommentsOnPost(commentsOnPost)\n        console.log(allCommentsOnPost);\n\n    }\n\n    return (\n        <>\n            <div onClick={showModel}>\n                <div className=\"card text-white card-has-bg click-col\" style={{ backgroundImage: `url(https://ipfs.infura.io/ipfs/${post.media})` }}>\n                    <div className=\"card-img-overlay d-flex flex-column\">\n                        <div className=\"card-body\">\n\n                            <small className=\"card-meta mb-2 mr-2\">{timeConverter(post.createTime.toNumber())}</small>\n                            <h6 className=\"card-title mt-0 text-white\">{post.content}</h6>\n\n                        </div>\n                        <div className=\"card-footer\">\n                            <div className=\"media\">\n                                <img className=\"mr-3 rounded-circle\" src={`data:image/png;base64,${new Identicon(post.author, 50).toString()}`} alt=\"\" style={{ maxWidth: 50 }} />\n                                <div className=\"media-body\">\n                                    <h6 className=\"my-0 text-warning\">Tip: {window.web3.utils.fromWei(post.tipAmount.toString(), 'Ether')} Ether</h6>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n\n            <div id=\"myModal\" className=\"modal\">\n                <div className=\"modal-content\">\n                    <div className=\"text-center\" style={{ borderRadius: 20 }}>\n                        <input id=\"popUpPostId\" className=\"d-none\"></input>\n                        <img id=\"popUpMainImg\" style={{ maxWidth: '60%', maxHeight: 300, borderRadius: 20 }} alt=\"\" />\n\n                        <div className=\"mt-2 text-light\">\n                            <div className=\"d-flex justify-content-center mt-2\">\n                                <h6 id=\"popUpDate\" className=\"text-warning mr-2\">1</h6>\n                                <h6 id=\"popUpTip\" className=\"text-warning\">1</h6>\n                            </div>\n                            <h5 id=\"popUpContent\">a</h5>\n                        </div>\n                        <div className=\"d-flex justify-content-center mt-2\">\n                            <input className=\"d-none\" id=\"popUpPostAuthorID\" />\n                            <a id=\"popUpLinkBox\" href=\"/\">\n                                <img id=\"popUpImgBox\" className=\"rounded-circle mr-2\" src=\"https://cdn0.iconfinder.com/data/icons/user-pictures/100/male-512.png\" alt=\"\\\" style={{ maxWidth: 50 }} />\n                            </a>\n\n                            <button id=\"popUpFollowButton\" onClick={follow0} className=\"btn btn-primary mr-2\">Follow <i className=\"bi bi-person-plus\"></i></button>\n\n                            <button className=\"btn btn-outline-warning\" type=\"button\" data-bs-toggle=\"dropdown\">Tip <i className=\"bi bi-cash\"></i></button>\n                            <ul className=\"dropdown-menu dropdown-menu-end\">\n                                <li> <input type=\"number\" id=\"tipAmountBox\" className=\"form-control dropdown-item\" placeholder=\"enter amount in ETH\" min=\"0\" step=\".01\" /></li>\n                                <li><div className=\"dropdown-item\"><button onClick={tipPost0} className=\" btn btn-warning\">Tip</button></div></li>\n\n                            </ul>\n\n                        </div>\n\n                        <button onClick={showComments} className=\"btn btn-outline-primary mt-3 btn-sm\"> Comments </button>\n\n                        <div id=\"commentsDiv\" className=\"d-none mt-5\">\n                            <h6 id=\"commentPostId\" className=\"text-warning mr-2 d-none\">0</h6>\n\n                            <div className=\"input-group mb-3\">\n                                <input type=\"text\" maxLength={maxCharctersInComment} className=\"form-control\" id=\"commentTextBox\" placeholder=\"type comment here...\" />\n                                <button onClick={commentOnPost} className=\"btn btn-outline-primary\" type=\"button\">Comment</button>\n                            </div>\n                            <div className=\"d-none\" id=\"commentLoader\">\n                                <span class=\"spinner-border spinner-border\"></span>\n                            </div>\n\n                            <div className=\"\" id=\"commentLoaderContent\">\n                                <h6 id=\"commentTotalCount\" className=\"text-end text-warning mr-2\">.</h6>\n                                {allCommentsOnPost && allCommentsOnPost.map((comment, key) => {\n                                    return (\n                                        <div className=\"\" key={key} >\n                                            <div className=\"mt-4 d-flex border border-secondary rounded-3 p-2\" style={{ overflow: 'auto' }}>\n                                                <Link to={`/profile/${comment.by}`}>\n                                                    <img src={`data:image/png;base64,${new Identicon(comment.by, 30).toString()}`} alt=\"\" className=\"rounded-circle mr-2\" width=\"40\" height=\"40\" />\n                                                </Link>\n                                                <p>{comment.comment}</p>\n                                            </div>\n                                        </div>\n                                    )\n                                })}\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </>\n\n\n    )\n}\n\n"]},"metadata":{},"sourceType":"module"}