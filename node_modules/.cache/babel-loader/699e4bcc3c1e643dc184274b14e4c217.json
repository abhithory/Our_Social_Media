{"ast":null,"code":"import _toConsumableArray from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/anon/Documents/VSCode/dapper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/anon/Documents/VSCode/dapper/src/App.js\";\nimport React, { Component } from 'react';\nimport { // eslint-disable-next-line\nBrowserRouter as Router, Switch, Route, HashRouter } from \"react-router-dom\";\nimport Web3 from 'web3';\nimport OurSocialMediaJson from './abis/OurSocialMedia.json';\nimport { OSMcontext } from './OSMcontext';\nimport \"bootstrap-icons/font/bootstrap-icons.css\";\nimport './css/App.css';\nimport './css/Toast.css';\nimport Navbar from './components/Navbar';\nimport Main from './components/Main';\nimport CreateAccount from './pages/CreateAccount';\nimport NotConnected from './pages/NotConnected';\nimport CreatePost from './pages/CreatePost';\nimport Profile from './pages/Profile';\nimport TopFollowTo from './components/TopFollowTo';\nimport PostOf from './components/PostOf';\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.loadWeb3();\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"loadWeb3\",\n    value: function () {\n      var _loadWeb = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (window.ethereum) {\n                  window.web3 = new Web3(window.ethereum);\n                  this.loadBlockchainData();\n                } else {\n                  this.setState({\n                    connected: false\n                  });\n                }\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function loadWeb3() {\n        return _loadWeb.apply(this, arguments);\n      }\n\n      return loadWeb3;\n    }()\n  }, {\n    key: \"loadBlockchainData\",\n    value: function () {\n      var _loadBlockchainData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var web3, accounts, account, networkId, ourSocialMediaData, ourSocialMedia, isAccountCreated;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                web3 = new Web3(window.ethereum);\n                _context3.next = 3;\n                return window.ethereum.request({\n                  method: 'eth_requestAccounts'\n                });\n\n              case 3:\n                accounts = _context3.sent;\n                account = accounts[0];\n                web3.eth.defaultAccount = accounts[0];\n                this.setState({\n                  account: accounts[0]\n                });\n                _context3.next = 9;\n                return web3.eth.net.getId();\n\n              case 9:\n                networkId = _context3.sent;\n                ourSocialMediaData = OurSocialMediaJson.networks[networkId];\n\n                if (!ourSocialMediaData) {\n                  _context3.next = 28;\n                  break;\n                }\n\n                ourSocialMedia = web3.eth.Contract(OurSocialMediaJson.abi, ourSocialMediaData.address);\n                this.setState({\n                  ourSocialMedia: ourSocialMedia\n                });\n                _context3.next = 16;\n                return ourSocialMedia.methods.isAccountCreatedOf(account).call();\n\n              case 16:\n                isAccountCreated = _context3.sent;\n                this.setState({\n                  isAccountCreated: isAccountCreated\n                });\n                _context3.next = 20;\n                return this.loadAllPosts();\n\n              case 20:\n                if (!isAccountCreated) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                _context3.next = 23;\n                return this.loadProfile();\n\n              case 23:\n                _context3.next = 25;\n                return this.loadAllFollow();\n\n              case 25:\n                this.setState({\n                  loading: false\n                });\n                _context3.next = 29;\n                break;\n\n              case 28:\n                this.setState({\n                  connected: false\n                });\n\n              case 29:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function loadBlockchainData() {\n        return _loadBlockchainData.apply(this, arguments);\n      }\n\n      return loadBlockchainData;\n    }()\n  }, {\n    key: \"loadProfile\",\n    value: function () {\n      var _loadProfile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var userProfile;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.state.ourSocialMedia.methods.profileOf(this.state.account).call();\n\n              case 2:\n                userProfile = _context4.sent;\n                this.setState({\n                  userProfile: userProfile\n                });\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function loadProfile() {\n        return _loadProfile.apply(this, arguments);\n      }\n\n      return loadProfile;\n    }()\n  }, {\n    key: \"loadAllPosts\",\n    value: function () {\n      var _loadAllPosts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var totalPostsCount, postToLoad, totalLoadedPostsCount, i, post;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.state.ourSocialMedia.methods.totalPosts().call();\n\n              case 2:\n                totalPostsCount = _context5.sent;\n                this.setState({\n                  totalPostsCount: totalPostsCount.toNumber()\n                });\n\n                if (totalPostsCount <= this.state.everyTimeLoadPostCount) {\n                  postToLoad = 1;\n                  totalLoadedPostsCount = totalPostsCount;\n                } else {\n                  postToLoad = totalPostsCount - (this.state.everyTimeLoadPostCount - 1);\n                  totalLoadedPostsCount = this.state.everyTimeLoadPostCount;\n                }\n\n                i = totalPostsCount;\n\n              case 6:\n                if (!(i >= postToLoad)) {\n                  _context5.next = 14;\n                  break;\n                }\n\n                _context5.next = 9;\n                return this.state.ourSocialMedia.methods.allPosts(i).call();\n\n              case 9:\n                post = _context5.sent;\n                this.setState({\n                  allPosts: [].concat(_toConsumableArray(this.state.allPosts), [post]) // it can add posts in array\n\n                });\n\n              case 11:\n                i--;\n                _context5.next = 6;\n                break;\n\n              case 14:\n                this.setState({\n                  totalLoadedPostsCount: totalLoadedPostsCount\n                });\n\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function loadAllPosts() {\n        return _loadAllPosts.apply(this, arguments);\n      }\n\n      return loadAllPosts;\n    }()\n  }, {\n    key: \"loadMorePost\",\n    value: function () {\n      var _loadMorePost = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var postToLoad, i, post;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!(this.state.totalPostsCount <= this.state.totalLoadedPostsCount)) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                this.setState({\n                  isAllPostLoaded: true\n                });\n                return _context6.abrupt(\"return\");\n\n              case 3:\n                this.setState({\n                  isLoadingMorePost: true\n                });\n\n                if (this.state.totalPostsCount <= this.state.everyTimeLoadPostCount + this.state.totalLoadedPostsCount) {\n                  postToLoad = 1;\n                } else {\n                  postToLoad = this.state.totalPostsCount - (this.state.everyTimeLoadPostCount + this.state.totalLoadedPostsCount - 1);\n                }\n\n                i = this.state.totalPostsCount - this.state.totalLoadedPostsCount;\n\n              case 6:\n                if (!(i >= postToLoad)) {\n                  _context6.next = 14;\n                  break;\n                }\n\n                _context6.next = 9;\n                return this.state.ourSocialMedia.methods.allPosts(i).call();\n\n              case 9:\n                post = _context6.sent;\n                this.setState({\n                  allPosts: [].concat(_toConsumableArray(this.state.allPosts), [post]) // it can add posts in array\n\n                });\n\n              case 11:\n                i--;\n                _context6.next = 6;\n                break;\n\n              case 14:\n                this.setState({\n                  isLoadingMorePost: false\n                });\n                this.setState({\n                  totalLoadedPostsCount: this.state.everyTimeLoadPostCount + this.state.totalLoadedPostsCount\n                });\n\n              case 16:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function loadMorePost() {\n        return _loadMorePost.apply(this, arguments);\n      }\n\n      return loadMorePost;\n    }()\n  }, {\n    key: \"loadAllFollow\",\n    value: function () {\n      var _loadAllFollow = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        var followCount, i, follow;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this.state.ourSocialMedia.methods.totalFollowCountOfUser(this.state.account).call();\n\n              case 2:\n                followCount = _context7.sent;\n                i = 0;\n\n              case 4:\n                if (!(i < followCount)) {\n                  _context7.next = 12;\n                  break;\n                }\n\n                _context7.next = 7;\n                return this.state.ourSocialMedia.methods.userFollowTo(this.state.account, i).call();\n\n              case 7:\n                follow = _context7.sent;\n                this.setState({\n                  allFollow: [].concat(_toConsumableArray(this.state.allFollow), [follow])\n                });\n\n              case 9:\n                i++;\n                _context7.next = 4;\n                break;\n\n              case 12:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function loadAllFollow() {\n        return _loadAllFollow.apply(this, arguments);\n      }\n\n      return loadAllFollow;\n    }()\n  }, {\n    key: \"createAccount\",\n    value: function () {\n      var _createAccount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(_name, _userID) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                this.setState({\n                  loading: true\n                });\n                this.state.ourSocialMedia.methods.createAccount(_name, _userID).send({\n                  from: this.state.account\n                }).on('transactionHash', function (hash) {\n                  console.log('transactionHash', hash);\n                }).on('receipt', function (receipt) {}).on('confirmation', function (confirmationNumber, receipt) {\n                  _this2.setState({\n                    isAccountCreated: true\n                  });\n\n                  _this2.loadProfile();\n\n                  window.location.replace(\"/\");\n                }).on('error', function (error, receipt) {\n                  _this2.launch_toast(error.message);\n\n                  _this2.setState({\n                    loading: false\n                  });\n\n                  console.log('error', error);\n                  console.log('receipt', receipt);\n                });\n\n              case 2:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function createAccount(_x, _x2) {\n        return _createAccount.apply(this, arguments);\n      }\n\n      return createAccount;\n    }()\n  }, {\n    key: \"createPost\",\n    value: function () {\n      var _createPost = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(_content, _media) {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                this.setState({\n                  loading: true\n                });\n                this.state.ourSocialMedia.methods.createPost(_content, _media).send({\n                  from: this.state.account\n                }).on('transactionHash', function (hash) {\n                  console.log('transactionHash', hash);\n                }).on('receipt', function (receipt) {}).on('confirmation', function (confirmationNumber, receipt) {\n                  console.log(receipt);\n                  window.location.replace(\"/\");\n                }).on('error', function (error, receipt) {\n                  _this3.launch_toast(error.message);\n\n                  console.log('error', error);\n                  console.log('receipt', receipt);\n\n                  _this3.setState({\n                    loading: false\n                  });\n                });\n\n              case 2:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function createPost(_x3, _x4) {\n        return _createPost.apply(this, arguments);\n      }\n\n      return createPost;\n    }()\n  }, {\n    key: \"tipPost\",\n    value: function () {\n      var _tipPost = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(_id, tipAmount) {\n        var _this4 = this;\n\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                this.setState({\n                  loading: true\n                });\n                this.state.ourSocialMedia.methods.tipPost(_id).send({\n                  from: this.state.account,\n                  value: tipAmount * Math.pow(10, 18)\n                }).on('transactionHash', function (hash) {\n                  console.log('transactionHash', hash);\n                }).on('receipt', function (receipt) {}).on('confirmation', function (confirmationNumber, receipt) {\n                  window.location.replace(\"/\");\n                }).on('error', function (error, receipt) {\n                  _this4.launch_toast(error.message);\n\n                  console.log('error', error);\n                  console.log('receipt', receipt);\n                });\n\n              case 2:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function tipPost(_x5, _x6) {\n        return _tipPost.apply(this, arguments);\n      }\n\n      return tipPost;\n    }()\n  }, {\n    key: \"follow\",\n    value: function () {\n      var _follow = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(_address) {\n        var _this5 = this;\n\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                this.setState({\n                  loading: true\n                });\n                this.state.ourSocialMedia.methods.follow(_address).send({\n                  from: this.state.account\n                }).on('transactionHash', function (hash) {\n                  console.log('transactionHash', hash);\n                }).on('receipt', function (receipt) {}).on('confirmation', function (confirmationNumber, receipt) {\n                  window.location.replace(\"/\");\n                }).on('error', function (error, receipt) {\n                  _this5.launch_toast(error.message);\n\n                  console.log('error', error);\n                  console.log('receipt', receipt);\n                });\n\n              case 2:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function follow(_x7) {\n        return _follow.apply(this, arguments);\n      }\n\n      return follow;\n    }()\n  }, {\n    key: \"isFollowedByUser\",\n    value: function () {\n      var _isFollowedByUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(_address) {\n        var i;\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                i = 0;\n\n              case 1:\n                if (!(i < this.state.allFollow.length)) {\n                  _context12.next = 7;\n                  break;\n                }\n\n                if (!(this.state.allFollow[i] === _address)) {\n                  _context12.next = 4;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\", true);\n\n              case 4:\n                i++;\n                _context12.next = 1;\n                break;\n\n              case 7:\n                return _context12.abrupt(\"return\", false);\n\n              case 8:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function isFollowedByUser(_x8) {\n        return _isFollowedByUser.apply(this, arguments);\n      }\n\n      return isFollowedByUser;\n    }()\n  }, {\n    key: \"launch_toast\",\n    value: function () {\n      var _launch_toast = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(_msg) {\n        var _toast_text, x;\n\n        return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                _toast_text = document.getElementById(\"toast_text\");\n                _toast_text.innerText = _msg;\n                x = document.getElementById(\"toast\");\n                x.className = \"show\";\n                setTimeout(function () {\n                  x.className = x.className.replace(\"show\", \"\");\n                }, 5000);\n\n              case 5:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13);\n      }));\n\n      function launch_toast(_x9) {\n        return _launch_toast.apply(this, arguments);\n      }\n\n      return launch_toast;\n    }()\n  }]);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      account: '',\n      userProfile: null,\n      isAccountCreated: true,\n      ourSocialMedia: null,\n      totalPostsCount: 0,\n      totalLoadedPostsCount: 0,\n      everyTimeLoadPostCount: 3,\n      isLoadingMorePost: false,\n      isAllPostLoaded: false,\n      maxCharctersInPost: 420,\n      maxCharctersInComment: 220,\n      allPosts: [],\n      allFollow: [],\n      loading: true,\n      connected: true\n    };\n    _this.createAccount = _this.createAccount.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.createPost = _this.createPost.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.tipPost = _this.tipPost.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.follow = _this.follow.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.isFollowedByUser = _this.isFollowedByUser.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.loadMorePost = _this.loadMorePost.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      return (\n        /*#__PURE__*/\n        // <Router>\n        React.createElement(HashRouter, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 1\n          }\n        }, /*#__PURE__*/React.createElement(OSMcontext.Provider, {\n          value: {\n            account: this.state.account,\n            ourSocialMedia: this.state.ourSocialMedia,\n            isAccountCreated: this.state.isAccountCreated,\n            everyTimeLoadPostCount: this.state.everyTimeLoadPostCount,\n            maxCharctersInPost: this.state.maxCharctersInPost,\n            maxCharctersInComment: this.state.maxCharctersInComment,\n            isFollowedByUser: this.isFollowedByUser,\n            tipPost: this.tipPost,\n            follow: this.follow\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 11\n          }\n        }, this.state.connected ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n          userProfile: this.state.userProfile,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 17\n          }\n        }), this.state.loading ? /*#__PURE__*/React.createElement(\"div\", {\n          className: \"text-center m-5\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"spinner-border bg-light m-auto\",\n          role: \"status\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 21\n          }\n        })) : /*#__PURE__*/React.createElement(Switch, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(Route, {\n          path: \"/\",\n          exact: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(TopFollowTo, {\n          allFollow: this.state.allFollow,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 23\n          }\n        }), /*#__PURE__*/React.createElement(Main, {\n          allPosts: this.state.allPosts,\n          loadMorePost: this.loadMorePost,\n          isAllPostLoaded: this.state.isAllPostLoaded,\n          isLoadingMorePost: this.state.isLoadingMorePost,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 23\n          }\n        })), /*#__PURE__*/React.createElement(Route, {\n          path: \"/postsOf/:userid\",\n          exact: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(TopFollowTo, {\n          allFollow: this.state.allFollow,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 23\n          }\n        }), /*#__PURE__*/React.createElement(PostOf, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 23\n          }\n        })), /*#__PURE__*/React.createElement(Route, {\n          path: \"/createPost\",\n          exact: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 21\n          }\n        }, this.state.isAccountCreated ? /*#__PURE__*/React.createElement(CreatePost, {\n          createPost: this.createPost,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 25\n          }\n        }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n          class: \"mx-5 alert alert-warning\",\n          role: \"alert\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 27\n          }\n        }, \"Please First Create Account!\"), /*#__PURE__*/React.createElement(CreateAccount, {\n          createAccount: this.createAccount,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 27\n          }\n        }))), /*#__PURE__*/React.createElement(Route, {\n          path: \"/profile/:userid\",\n          exact: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Profile, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 23\n          }\n        })), /*#__PURE__*/React.createElement(Route, {\n          path: \"/createProfile\",\n          exact: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 21\n          }\n        }, this.state.isAccountCreated ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n          class: \"mx-5 alert alert-success\",\n          role: \"alert\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 27\n          }\n        }, \"Your Profile is already created!\"), /*#__PURE__*/React.createElement(TopFollowTo, {\n          allFollow: this.state.allFollow,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 27\n          }\n        }), /*#__PURE__*/React.createElement(Main, {\n          allPosts: this.state.allPosts,\n          loadMorePost: this.loadMorePost,\n          isAllPostLoaded: this.state.isAllPostLoaded,\n          isLoadingMorePost: this.state.isLoadingMorePost,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 27\n          }\n        })) : /*#__PURE__*/React.createElement(CreateAccount, {\n          createAccount: this.createAccount,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 25\n          }\n        }))), /*#__PURE__*/React.createElement(\"div\", {\n          id: \"toast\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          id: \"toast_img\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 33\n          }\n        }, \"Icon\"), /*#__PURE__*/React.createElement(\"div\", {\n          id: \"toast_text\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 63\n          }\n        }))) : /*#__PURE__*/React.createElement(NotConnected, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }\n        }))))\n      );\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/anon/Documents/VSCode/dapper/src/App.js"],"names":["React","Component","BrowserRouter","Router","Switch","Route","HashRouter","Web3","OurSocialMediaJson","OSMcontext","Navbar","Main","CreateAccount","NotConnected","CreatePost","Profile","TopFollowTo","PostOf","App","loadWeb3","window","ethereum","web3","loadBlockchainData","setState","connected","request","method","accounts","account","eth","defaultAccount","net","getId","networkId","ourSocialMediaData","networks","ourSocialMedia","Contract","abi","address","methods","isAccountCreatedOf","call","isAccountCreated","loadAllPosts","loadProfile","loadAllFollow","loading","state","profileOf","userProfile","totalPosts","totalPostsCount","toNumber","everyTimeLoadPostCount","postToLoad","totalLoadedPostsCount","i","allPosts","post","isAllPostLoaded","isLoadingMorePost","totalFollowCountOfUser","followCount","userFollowTo","follow","allFollow","_name","_userID","createAccount","send","from","on","hash","console","log","receipt","confirmationNumber","location","replace","error","launch_toast","message","_content","_media","createPost","_id","tipAmount","tipPost","value","_address","length","_msg","_toast_text","document","getElementById","innerText","x","className","setTimeout","props","maxCharctersInPost","maxCharctersInComment","bind","isFollowedByUser","loadMorePost"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SACE;AACAC,aAAa,IAAIC,MAFnB,EAGEC,MAHF,EAIEC,KAJF,EAISC,UAJT,QAKO,kBALP;AAQA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,kBAAP,MAA+B,4BAA/B;AAEA,SAASC,UAAT,QAA2B,cAA3B;AAEA,OAAO,0CAAP;AACA,OAAO,eAAP;AACA,OAAO,iBAAP;AAEA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,aAAP,MAA0B,uBAA1B;AACA,OAAOC,YAAP,MAAyB,sBAAzB;AACA,OAAOC,UAAP,MAAuB,oBAAvB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;;IAGMC,G;;;;;;;;;;;;uBAGI,KAAKC,QAAL,E;;;;;;;;;;;;;;;;;;;;;;;;AAKN,oBAAIC,MAAM,CAACC,QAAX,EAAqB;AACnBD,kBAAAA,MAAM,CAACE,IAAP,GAAc,IAAIf,IAAJ,CAASa,MAAM,CAACC,QAAhB,CAAd;AAEA,uBAAKE,kBAAL;AACD,iBAJD,MAIO;AACL,uBAAKC,QAAL,CAAc;AAAEC,oBAAAA,SAAS,EAAE;AAAb,mBAAd;AACD;;;;;;;;;;;;;;;;;;;;;;;;;AAKKH,gBAAAA,I,GAAO,IAAIf,IAAJ,CAASa,MAAM,CAACC,QAAhB,C;;uBAEUD,MAAM,CAACC,QAAP,CAAgBK,OAAhB,CAAwB;AAAEC,kBAAAA,MAAM,EAAE;AAAV,iBAAxB,C;;;AAAjBC,gBAAAA,Q;AACAC,gBAAAA,O,GAAUD,QAAQ,CAAC,CAAD,C;AACxBN,gBAAAA,IAAI,CAACQ,GAAL,CAASC,cAAT,GAA0BH,QAAQ,CAAC,CAAD,CAAlC;AACA,qBAAKJ,QAAL,CAAc;AAAEK,kBAAAA,OAAO,EAAED,QAAQ,CAAC,CAAD;AAAnB,iBAAd;;uBAEwBN,IAAI,CAACQ,GAAL,CAASE,GAAT,CAAaC,KAAb,E;;;AAAlBC,gBAAAA,S;AACAC,gBAAAA,kB,GAAqB3B,kBAAkB,CAAC4B,QAAnB,CAA4BF,SAA5B,C;;qBAEvBC,kB;;;;;AACIE,gBAAAA,c,GAAiBf,IAAI,CAACQ,GAAL,CAASQ,QAAT,CAAkB9B,kBAAkB,CAAC+B,GAArC,EAA0CJ,kBAAkB,CAACK,OAA7D,C;AACvB,qBAAKhB,QAAL,CAAc;AAAEa,kBAAAA,cAAc,EAAdA;AAAF,iBAAd;;uBAE+BA,cAAc,CAACI,OAAf,CAAuBC,kBAAvB,CAA0Cb,OAA1C,EAAmDc,IAAnD,E;;;AAAzBC,gBAAAA,gB;AACN,qBAAKpB,QAAL,CAAc;AAAEoB,kBAAAA,gBAAgB,EAAhBA;AAAF,iBAAd;;uBAEM,KAAKC,YAAL,E;;;qBAEFD,gB;;;;;;uBACI,KAAKE,WAAL,E;;;;uBACA,KAAKC,aAAL,E;;;AAGR,qBAAKvB,QAAL,CAAc;AAAEwB,kBAAAA,OAAO,EAAE;AAAX,iBAAd;;;;;AAGA,qBAAKxB,QAAL,CAAc;AAAEC,kBAAAA,SAAS,EAAE;AAAb,iBAAd;;;;;;;;;;;;;;;;;;;;;;;;;;uBAKwB,KAAKwB,KAAL,CAAWZ,cAAX,CAA0BI,OAA1B,CAAkCS,SAAlC,CAA4C,KAAKD,KAAL,CAAWpB,OAAvD,EAAgEc,IAAhE,E;;;AAApBQ,gBAAAA,W;AACN,qBAAK3B,QAAL,CAAc;AAAE2B,kBAAAA,WAAW,EAAXA;AAAF,iBAAd;;;;;;;;;;;;;;;;;;;;;;;;;;uBAI8B,KAAKF,KAAL,CAAWZ,cAAX,CAA0BI,OAA1B,CAAkCW,UAAlC,GAA+CT,IAA/C,E;;;AAAxBU,gBAAAA,e;AACN,qBAAK7B,QAAL,CAAc;AAAE6B,kBAAAA,eAAe,EAAEA,eAAe,CAACC,QAAhB;AAAnB,iBAAd;;AAKA,oBAAID,eAAe,IAAI,KAAKJ,KAAL,CAAWM,sBAAlC,EAA0D;AACxDC,kBAAAA,UAAU,GAAG,CAAb;AACAC,kBAAAA,qBAAqB,GAAGJ,eAAxB;AACD,iBAHD,MAGO;AACLG,kBAAAA,UAAU,GAAGH,eAAe,IAAI,KAAKJ,KAAL,CAAWM,sBAAX,GAAoC,CAAxC,CAA5B;AACAE,kBAAAA,qBAAqB,GAAG,KAAKR,KAAL,CAAWM,sBAAnC;AAED;;AAEQG,gBAAAA,C,GAAIL,e;;;sBAAiBK,CAAC,IAAIF,U;;;;;;uBAChB,KAAKP,KAAL,CAAWZ,cAAX,CAA0BI,OAA1B,CAAkCkB,QAAlC,CAA2CD,CAA3C,EAA8Cf,IAA9C,E;;;AAAbiB,gBAAAA,I;AACJ,qBAAKpC,QAAL,CAAc;AACZmC,kBAAAA,QAAQ,+BAAM,KAAKV,KAAL,CAAWU,QAAjB,IAA2BC,IAA3B,EADI,CAC8B;;AAD9B,iBAAd;;;AAF6CF,gBAAAA,CAAC,E;;;;;AAOhD,qBAAKlC,QAAL,CAAc;AAAEiC,kBAAAA,qBAAqB,EAArBA;AAAF,iBAAd;;;;;;;;;;;;;;;;;;;;;;;;;sBAKI,KAAKR,KAAL,CAAWI,eAAX,IAA8B,KAAKJ,KAAL,CAAWQ,qB;;;;;AAC3C,qBAAKjC,QAAL,CAAc;AAAEqC,kBAAAA,eAAe,EAAE;AAAnB,iBAAd;;;;AAGF,qBAAKrC,QAAL,CAAc;AAAEsC,kBAAAA,iBAAiB,EAAE;AAArB,iBAAd;;AAGA,oBAAI,KAAKb,KAAL,CAAWI,eAAX,IAA8B,KAAKJ,KAAL,CAAWM,sBAAX,GAAoC,KAAKN,KAAL,CAAWQ,qBAAjF,EAAwG;AACtGD,kBAAAA,UAAU,GAAG,CAAb;AACD,iBAFD,MAEO;AACLA,kBAAAA,UAAU,GAAG,KAAKP,KAAL,CAAWI,eAAX,IAA8B,KAAKJ,KAAL,CAAWM,sBAAX,GAAoC,KAAKN,KAAL,CAAWQ,qBAA/C,GAAuE,CAArG,CAAb;AACD;;AAEQC,gBAAAA,C,GAAI,KAAKT,KAAL,CAAWI,eAAX,GAA6B,KAAKJ,KAAL,CAAWQ,qB;;;sBAAuBC,CAAC,IAAIF,U;;;;;;uBAC9D,KAAKP,KAAL,CAAWZ,cAAX,CAA0BI,OAA1B,CAAkCkB,QAAlC,CAA2CD,CAA3C,EAA8Cf,IAA9C,E;;;AAAbiB,gBAAAA,I;AACJ,qBAAKpC,QAAL,CAAc;AACZmC,kBAAAA,QAAQ,+BAAM,KAAKV,KAAL,CAAWU,QAAjB,IAA2BC,IAA3B,EADI,CAC8B;;AAD9B,iBAAd;;;AAF2FF,gBAAAA,CAAC,E;;;;;AAO9F,qBAAKlC,QAAL,CAAc;AAAEsC,kBAAAA,iBAAiB,EAAE;AAArB,iBAAd;AACA,qBAAKtC,QAAL,CAAc;AAAEiC,kBAAAA,qBAAqB,EAAE,KAAKR,KAAL,CAAWM,sBAAX,GAAoC,KAAKN,KAAL,CAAWQ;AAAxE,iBAAd;;;;;;;;;;;;;;;;;;;;;;;;;;uBAO0B,KAAKR,KAAL,CAAWZ,cAAX,CAA0BI,OAA1B,CAAkCsB,sBAAlC,CAAyD,KAAKd,KAAL,CAAWpB,OAApE,EAA6Ec,IAA7E,E;;;AAApBqB,gBAAAA,W;AAEGN,gBAAAA,C,GAAI,C;;;sBAAGA,CAAC,GAAGM,W;;;;;;uBACC,KAAKf,KAAL,CAAWZ,cAAX,CAA0BI,OAA1B,CAAkCwB,YAAlC,CAA+C,KAAKhB,KAAL,CAAWpB,OAA1D,EAAmE6B,CAAnE,EAAsEf,IAAtE,E;;;AAAfuB,gBAAAA,M;AACJ,qBAAK1C,QAAL,CAAc;AACZ2C,kBAAAA,SAAS,+BAAM,KAAKlB,KAAL,CAAWkB,SAAjB,IAA4BD,MAA5B;AADG,iBAAd;;;AAF+BR,gBAAAA,CAAC,E;;;;;;;;;;;;;;;;;;;;;sGAShBU,K,EAAOC,O;;;;;;;AACzB,qBAAK7C,QAAL,CAAc;AAAEwB,kBAAAA,OAAO,EAAE;AAAX,iBAAd;AAEA,qBAAKC,KAAL,CAAWZ,cAAX,CAA0BI,OAA1B,CAAkC6B,aAAlC,CAAgDF,KAAhD,EAAuDC,OAAvD,EACGE,IADH,CACQ;AAAEC,kBAAAA,IAAI,EAAE,KAAKvB,KAAL,CAAWpB;AAAnB,iBADR,EAEG4C,EAFH,CAEM,iBAFN,EAEyB,UAACC,IAAD,EAAU;AAC/BC,kBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,IAA/B;AACD,iBAJH,EAKGD,EALH,CAKM,SALN,EAKiB,UAACI,OAAD,EAAa,CAC3B,CANH,EAOGJ,EAPH,CAOM,cAPN,EAOsB,UAACK,kBAAD,EAAqBD,OAArB,EAAiC;AACnD,kBAAA,MAAI,CAACrD,QAAL,CAAc;AAAEoB,oBAAAA,gBAAgB,EAAE;AAApB,mBAAd;;AACA,kBAAA,MAAI,CAACE,WAAL;;AACA1B,kBAAAA,MAAM,CAAC2D,QAAP,CAAgBC,OAAhB,CAAwB,GAAxB;AAED,iBAZH,EAaGP,EAbH,CAaM,OAbN,EAae,UAACQ,KAAD,EAAQJ,OAAR,EAAoB;AAC/B,kBAAA,MAAI,CAACK,YAAL,CAAkBD,KAAK,CAACE,OAAxB;;AACA,kBAAA,MAAI,CAAC3D,QAAL,CAAc;AAAEwB,oBAAAA,OAAO,EAAE;AAAX,mBAAd;;AACA2B,kBAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBK,KAArB;AACAN,kBAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBC,OAAvB;AACD,iBAlBH;;;;;;;;;;;;;;;;;;;mGAsBeO,Q,EAAUC,M;;;;;;;AACzB,qBAAK7D,QAAL,CAAc;AAAEwB,kBAAAA,OAAO,EAAE;AAAX,iBAAd;AAEA,qBAAKC,KAAL,CAAWZ,cAAX,CAA0BI,OAA1B,CAAkC6C,UAAlC,CAA6CF,QAA7C,EAAuDC,MAAvD,EACGd,IADH,CACQ;AAAEC,kBAAAA,IAAI,EAAE,KAAKvB,KAAL,CAAWpB;AAAnB,iBADR,EAEG4C,EAFH,CAEM,iBAFN,EAEyB,UAACC,IAAD,EAAU;AAC/BC,kBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,IAA/B;AACD,iBAJH,EAKGD,EALH,CAKM,SALN,EAKiB,UAACI,OAAD,EAAa,CAC3B,CANH,EAOGJ,EAPH,CAOM,cAPN,EAOsB,UAACK,kBAAD,EAAqBD,OAArB,EAAiC;AACnDF,kBAAAA,OAAO,CAACC,GAAR,CAAYC,OAAZ;AACAzD,kBAAAA,MAAM,CAAC2D,QAAP,CAAgBC,OAAhB,CAAwB,GAAxB;AACD,iBAVH,EAWGP,EAXH,CAWM,OAXN,EAWe,UAACQ,KAAD,EAAQJ,OAAR,EAAoB;AAC/B,kBAAA,MAAI,CAACK,YAAL,CAAkBD,KAAK,CAACE,OAAxB;;AACAR,kBAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBK,KAArB;AACAN,kBAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBC,OAAvB;;AAEA,kBAAA,MAAI,CAACrD,QAAL,CAAc;AAAEwB,oBAAAA,OAAO,EAAE;AAAX,mBAAd;AAED,iBAlBH;;;;;;;;;;;;;;;;;;;iGAuBYuC,G,EAAKC,S;;;;;;;AAEjB,qBAAKhE,QAAL,CAAc;AAAEwB,kBAAAA,OAAO,EAAE;AAAX,iBAAd;AAEA,qBAAKC,KAAL,CAAWZ,cAAX,CAA0BI,OAA1B,CAAkCgD,OAAlC,CAA0CF,GAA1C,EACGhB,IADH,CACQ;AAAEC,kBAAAA,IAAI,EAAE,KAAKvB,KAAL,CAAWpB,OAAnB;AAA4B6D,kBAAAA,KAAK,EAAEF,SAAS,YAAG,EAAH,EAAS,EAAT;AAA5C,iBADR,EAEGf,EAFH,CAEM,iBAFN,EAEyB,UAACC,IAAD,EAAU;AAC/BC,kBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,IAA/B;AACD,iBAJH,EAKGD,EALH,CAKM,SALN,EAKiB,UAACI,OAAD,EAAa,CAC3B,CANH,EAOGJ,EAPH,CAOM,cAPN,EAOsB,UAACK,kBAAD,EAAqBD,OAArB,EAAiC;AACnDzD,kBAAAA,MAAM,CAAC2D,QAAP,CAAgBC,OAAhB,CAAwB,GAAxB;AACD,iBATH,EAUGP,EAVH,CAUM,OAVN,EAUe,UAACQ,KAAD,EAAQJ,OAAR,EAAoB;AAC/B,kBAAA,MAAI,CAACK,YAAL,CAAkBD,KAAK,CAACE,OAAxB;;AACAR,kBAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBK,KAArB;AACAN,kBAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBC,OAAvB;AACD,iBAdH;;;;;;;;;;;;;;;;;;;gGAkBWc,Q;;;;;;;AAEX,qBAAKnE,QAAL,CAAc;AAAEwB,kBAAAA,OAAO,EAAE;AAAX,iBAAd;AAEA,qBAAKC,KAAL,CAAWZ,cAAX,CAA0BI,OAA1B,CAAkCyB,MAAlC,CAAyCyB,QAAzC,EACGpB,IADH,CACQ;AAAEC,kBAAAA,IAAI,EAAE,KAAKvB,KAAL,CAAWpB;AAAnB,iBADR,EAEG4C,EAFH,CAEM,iBAFN,EAEyB,UAACC,IAAD,EAAU;AAC/BC,kBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,IAA/B;AACD,iBAJH,EAKGD,EALH,CAKM,SALN,EAKiB,UAACI,OAAD,EAAa,CAC3B,CANH,EAOGJ,EAPH,CAOM,cAPN,EAOsB,UAACK,kBAAD,EAAqBD,OAArB,EAAiC;AACnDzD,kBAAAA,MAAM,CAAC2D,QAAP,CAAgBC,OAAhB,CAAwB,GAAxB;AACD,iBATH,EAUGP,EAVH,CAUM,OAVN,EAUe,UAACQ,KAAD,EAAQJ,OAAR,EAAoB;AAC/B,kBAAA,MAAI,CAACK,YAAL,CAAkBD,KAAK,CAACE,OAAxB;;AACAR,kBAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBK,KAArB;AACAN,kBAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBC,OAAvB;AACD,iBAdH;;;;;;;;;;;;;;;;;;;0GAkBqBc,Q;;;;;;AAEZjC,gBAAAA,C,GAAI,C;;;sBAAGA,CAAC,GAAG,KAAKT,KAAL,CAAWkB,SAAX,CAAqByB,M;;;;;sBACnC,KAAK3C,KAAL,CAAWkB,SAAX,CAAqBT,CAArB,MAA4BiC,Q;;;;;mDACvB,I;;;AAFsCjC,gBAAAA,CAAC,E;;;;;mDAK3C,K;;;;;;;;;;;;;;;;;;;sGAGUmC,I;;;;;;;AACbC,gBAAAA,W,GAAcC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,C;AAClBF,gBAAAA,WAAW,CAACG,SAAZ,GAAwBJ,IAAxB;AAEIK,gBAAAA,C,GAAIH,QAAQ,CAACC,cAAT,CAAwB,OAAxB,C;AACRE,gBAAAA,CAAC,CAACC,SAAF,GAAc,MAAd;AACAC,gBAAAA,UAAU,CAAC,YAAY;AAAEF,kBAAAA,CAAC,CAACC,SAAF,GAAcD,CAAC,CAACC,SAAF,CAAYnB,OAAZ,CAAoB,MAApB,EAA4B,EAA5B,CAAd;AAAgD,iBAA/D,EAAiE,IAAjE,CAAV;;;;;;;;;;;;;;;;;;AAMF,eAAYqB,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,6EAAMA,KAAN;AACA,UAAKpD,KAAL,GAAa;AACXpB,MAAAA,OAAO,EAAE,EADE;AAEXsB,MAAAA,WAAW,EAAE,IAFF;AAGXP,MAAAA,gBAAgB,EAAE,IAHP;AAIXP,MAAAA,cAAc,EAAE,IAJL;AAKXgB,MAAAA,eAAe,EAAE,CALN;AAMXI,MAAAA,qBAAqB,EAAE,CANZ;AAOXF,MAAAA,sBAAsB,EAAE,CAPb;AAQXO,MAAAA,iBAAiB,EAAE,KARR;AASXD,MAAAA,eAAe,EAAE,KATN;AAUXyC,MAAAA,kBAAkB,EAAE,GAVT;AAWXC,MAAAA,qBAAqB,EAAE,GAXZ;AAYX5C,MAAAA,QAAQ,EAAE,EAZC;AAaXQ,MAAAA,SAAS,EAAE,EAbA;AAcXnB,MAAAA,OAAO,EAAE,IAdE;AAeXvB,MAAAA,SAAS,EAAE;AAfA,KAAb;AAiBA,UAAK6C,aAAL,GAAqB,MAAKA,aAAL,CAAmBkC,IAAnB,uDAArB;AACA,UAAKlB,UAAL,GAAkB,MAAKA,UAAL,CAAgBkB,IAAhB,uDAAlB;AACA,UAAKf,OAAL,GAAe,MAAKA,OAAL,CAAae,IAAb,uDAAf;AACA,UAAKtC,MAAL,GAAc,MAAKA,MAAL,CAAYsC,IAAZ,uDAAd;AACA,UAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBD,IAAtB,uDAAxB;AACA,UAAKE,YAAL,GAAoB,MAAKA,YAAL,CAAkBF,IAAlB,uDAApB;AAxBiB;AAyBlB;;;;6BAGQ;AACP;AAAA;AACE;AACN,4BAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACQ,oBAAC,UAAD,CAAY,QAAZ;AAAqB,UAAA,KAAK,EAAE;AAC1B3E,YAAAA,OAAO,EAAE,KAAKoB,KAAL,CAAWpB,OADM;AAE1BQ,YAAAA,cAAc,EAAE,KAAKY,KAAL,CAAWZ,cAFD;AAG1BO,YAAAA,gBAAgB,EAAE,KAAKK,KAAL,CAAWL,gBAHH;AAI1BW,YAAAA,sBAAsB,EAAE,KAAKN,KAAL,CAAWM,sBAJT;AAK1B+C,YAAAA,kBAAkB,EAAE,KAAKrD,KAAL,CAAWqD,kBALL;AAM1BC,YAAAA,qBAAqB,EAAE,KAAKtD,KAAL,CAAWsD,qBANR;AAO1BE,YAAAA,gBAAgB,EAAE,KAAKA,gBAPG;AAQ1BhB,YAAAA,OAAO,EAAE,KAAKA,OARY;AAS1BvB,YAAAA,MAAM,EAAE,KAAKA;AATa,WAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAWE;AAAK,UAAA,SAAS,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,KAAKjB,KAAL,CAAWxB,SAAX,gBAEC,uDACE,oBAAC,MAAD;AAAQ,UAAA,WAAW,EAAE,KAAKwB,KAAL,CAAWE,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EAEG,KAAKF,KAAL,CAAWD,OAAX,gBAEC;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAK,UAAA,SAAS,EAAC,gCAAf;AAAgD,UAAA,IAAI,EAAC,QAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAFD,gBAOC,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,KAAD;AAAO,UAAA,IAAI,EAAC,GAAZ;AAAgB,UAAA,KAAK,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,WAAD;AAAa,UAAA,SAAS,EAAE,KAAKC,KAAL,CAAWkB,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAEE,oBAAC,IAAD;AAAM,UAAA,QAAQ,EAAE,KAAKlB,KAAL,CAAWU,QAA3B;AAAqC,UAAA,YAAY,EAAE,KAAK+C,YAAxD;AAAsE,UAAA,eAAe,EAAE,KAAKzD,KAAL,CAAWY,eAAlG;AAAmH,UAAA,iBAAiB,EAAE,KAAKZ,KAAL,CAAWa,iBAAjJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF,CADF,eAKE,oBAAC,KAAD;AAAO,UAAA,IAAI,EAAC,kBAAZ;AAA+B,UAAA,KAAK,MAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,WAAD;AAAa,UAAA,SAAS,EAAE,KAAKb,KAAL,CAAWkB,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAEE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF,CALF,eASE,oBAAC,KAAD;AAAO,UAAA,IAAI,EAAC,aAAZ;AAA0B,UAAA,KAAK,MAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,KAAKlB,KAAL,CAAWL,gBAAX,gBAEC,oBAAC,UAAD;AAAY,UAAA,UAAU,EAAE,KAAK0C,UAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFD,gBAIC,uDACE;AAAK,UAAA,KAAK,EAAC,0BAAX;AAAsC,UAAA,IAAI,EAAC,OAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CADF,eAIE,oBAAC,aAAD;AAAe,UAAA,aAAa,EAAE,KAAKhB,aAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJF,CALJ,CATF,eAsBE,oBAAC,KAAD;AAAO,UAAA,IAAI,EAAC,kBAAZ;AAA+B,UAAA,KAAK,MAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAtBF,eAyBE,oBAAC,KAAD;AAAO,UAAA,IAAI,EAAC,gBAAZ;AAA6B,UAAA,KAAK,MAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,KAAKrB,KAAL,CAAWL,gBAAX,gBAEC,uDACE;AAAK,UAAA,KAAK,EAAC,0BAAX;AAAsC,UAAA,IAAI,EAAC,OAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CADF,eAIE,oBAAC,WAAD;AAAa,UAAA,SAAS,EAAE,KAAKK,KAAL,CAAWkB,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJF,eAKE,oBAAC,IAAD;AAAM,UAAA,QAAQ,EAAE,KAAKlB,KAAL,CAAWU,QAA3B;AAAqC,UAAA,YAAY,EAAE,KAAK+C,YAAxD;AAAsE,UAAA,eAAe,EAAE,KAAKzD,KAAL,CAAWY,eAAlG;AAAmH,UAAA,iBAAiB,EAAE,KAAKZ,KAAL,CAAWa,iBAAjJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UALF,CAFD,gBAUC,oBAAC,aAAD;AAAe,UAAA,aAAa,EAAE,KAAKQ,aAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAXJ,CAzBF,CATJ,eAmDE;AAAK,UAAA,EAAE,EAAC,OAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAgB;AAAK,UAAA,EAAE,EAAC,WAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAhB,eAA8C;AAAK,UAAA,EAAE,EAAC,YAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA9C,CAnDF,CAFD,gBAwDC,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAzDJ,CAXF,CADR;AAFI;AA8ED;;;;EA1VerE,S;;AA6VlB,eAAeiB,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport {\n  // eslint-disable-next-line\n  BrowserRouter as Router,\n  Switch,\n  Route, HashRouter\n} from \"react-router-dom\";\n\n\nimport Web3 from 'web3';\nimport OurSocialMediaJson from './abis/OurSocialMedia.json'\n\nimport { OSMcontext } from './OSMcontext';\n\nimport \"bootstrap-icons/font/bootstrap-icons.css\"\nimport './css/App.css';\nimport './css/Toast.css';\n\nimport Navbar from './components/Navbar'\nimport Main from './components/Main'\nimport CreateAccount from './pages/CreateAccount';\nimport NotConnected from './pages/NotConnected';\nimport CreatePost from './pages/CreatePost';\nimport Profile from './pages/Profile';\nimport TopFollowTo from './components/TopFollowTo';\nimport PostOf from './components/PostOf';\n\n\nclass App extends Component {\n\n  async componentWillMount() {\n    await this.loadWeb3()\n  }\n\n  async loadWeb3() {\n\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n\n      this.loadBlockchainData()\n    } else {\n      this.setState({ connected: false })\n    }\n\n  }\n\n  async loadBlockchainData() {\n    const web3 = new Web3(window.ethereum);\n\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    web3.eth.defaultAccount = accounts[0];\n    this.setState({ account: accounts[0] })\n\n    const networkId = await web3.eth.net.getId()\n    const ourSocialMediaData = OurSocialMediaJson.networks[networkId]\n\n    if (ourSocialMediaData) {\n      const ourSocialMedia = web3.eth.Contract(OurSocialMediaJson.abi, ourSocialMediaData.address);\n      this.setState({ ourSocialMedia })\n\n      const isAccountCreated = await ourSocialMedia.methods.isAccountCreatedOf(account).call();\n      this.setState({ isAccountCreated })\n\n      await this.loadAllPosts();\n\n      if (isAccountCreated) {\n        await this.loadProfile();\n        await this.loadAllFollow();\n      }\n\n      this.setState({ loading: false })\n\n    } else {\n      this.setState({ connected: false })\n    }\n  }\n\n  async loadProfile() {\n    const userProfile = await this.state.ourSocialMedia.methods.profileOf(this.state.account).call();\n    this.setState({ userProfile });\n  }\n\n  async loadAllPosts() {\n    const totalPostsCount = await this.state.ourSocialMedia.methods.totalPosts().call();\n    this.setState({ totalPostsCount: totalPostsCount.toNumber() });\n\n    let postToLoad;\n    let totalLoadedPostsCount;\n\n    if (totalPostsCount <= this.state.everyTimeLoadPostCount) {\n      postToLoad = 1;\n      totalLoadedPostsCount = totalPostsCount;\n    } else {\n      postToLoad = totalPostsCount - (this.state.everyTimeLoadPostCount - 1);\n      totalLoadedPostsCount = this.state.everyTimeLoadPostCount;\n\n    }\n\n    for (var i = totalPostsCount; i >= postToLoad; i--) {\n      let post = await this.state.ourSocialMedia.methods.allPosts(i).call();\n      this.setState({\n        allPosts: [...this.state.allPosts, post]  // it can add posts in array\n      })\n    }\n\n    this.setState({ totalLoadedPostsCount })\n  }\n\n  async loadMorePost() {\n\n    if (this.state.totalPostsCount <= this.state.totalLoadedPostsCount) {\n      this.setState({ isAllPostLoaded: true });\n      return;\n    }\n    this.setState({ isLoadingMorePost: true });\n    let postToLoad;\n\n    if (this.state.totalPostsCount <= this.state.everyTimeLoadPostCount + this.state.totalLoadedPostsCount) {\n      postToLoad = 1;\n    } else {\n      postToLoad = this.state.totalPostsCount - (this.state.everyTimeLoadPostCount + this.state.totalLoadedPostsCount - 1);\n    }\n\n    for (var i = this.state.totalPostsCount - this.state.totalLoadedPostsCount; i >= postToLoad; i--) {\n      let post = await this.state.ourSocialMedia.methods.allPosts(i).call();\n      this.setState({\n        allPosts: [...this.state.allPosts, post]  // it can add posts in array\n      })\n    }\n\n    this.setState({ isLoadingMorePost: false });\n    this.setState({ totalLoadedPostsCount: this.state.everyTimeLoadPostCount + this.state.totalLoadedPostsCount })\n\n\n  }\n\n  async loadAllFollow() {\n\n    const followCount = await this.state.ourSocialMedia.methods.totalFollowCountOfUser(this.state.account).call();\n\n    for (var i = 0; i < followCount; i++) {\n      let follow = await this.state.ourSocialMedia.methods.userFollowTo(this.state.account, i).call();\n      this.setState({\n        allFollow: [...this.state.allFollow, follow]\n      })\n    }\n  }\n\n\n  async createAccount(_name, _userID) {\n    this.setState({ loading: true })\n\n    this.state.ourSocialMedia.methods.createAccount(_name, _userID)\n      .send({ from: this.state.account })\n      .on('transactionHash', (hash) => {\n        console.log('transactionHash', hash);\n      })\n      .on('receipt', (receipt) => {\n      })\n      .on('confirmation', (confirmationNumber, receipt) => {\n        this.setState({ isAccountCreated: true })\n        this.loadProfile();\n        window.location.replace(\"/\");\n\n      })\n      .on('error', (error, receipt) => {\n        this.launch_toast(error.message);\n        this.setState({ loading: false })\n        console.log('error', error)\n        console.log('receipt', receipt)\n      });\n\n  }\n\n  async createPost(_content, _media) {\n    this.setState({ loading: true })\n\n    this.state.ourSocialMedia.methods.createPost(_content, _media)\n      .send({ from: this.state.account })\n      .on('transactionHash', (hash) => {\n        console.log('transactionHash', hash);\n      })\n      .on('receipt', (receipt) => {\n      })\n      .on('confirmation', (confirmationNumber, receipt) => {\n        console.log(receipt);\n        window.location.replace(\"/\");\n      })\n      .on('error', (error, receipt) => {\n        this.launch_toast(error.message);\n        console.log('error', error)\n        console.log('receipt', receipt)\n\n        this.setState({ loading: false })\n\n      });\n  }\n\n\n\n  async tipPost(_id, tipAmount) {\n\n    this.setState({ loading: true })\n\n    this.state.ourSocialMedia.methods.tipPost(_id)\n      .send({ from: this.state.account, value: tipAmount * 10 ** 18 })\n      .on('transactionHash', (hash) => {\n        console.log('transactionHash', hash);\n      })\n      .on('receipt', (receipt) => {\n      })\n      .on('confirmation', (confirmationNumber, receipt) => {\n        window.location.replace(\"/\");\n      })\n      .on('error', (error, receipt) => {\n        this.launch_toast(error.message);\n        console.log('error', error)\n        console.log('receipt', receipt)\n      });\n\n  }\n\n  async follow(_address) {\n\n    this.setState({ loading: true })\n\n    this.state.ourSocialMedia.methods.follow(_address)\n      .send({ from: this.state.account })\n      .on('transactionHash', (hash) => {\n        console.log('transactionHash', hash);\n      })\n      .on('receipt', (receipt) => {\n      })\n      .on('confirmation', (confirmationNumber, receipt) => {\n        window.location.replace(\"/\");\n      })\n      .on('error', (error, receipt) => {\n        this.launch_toast(error.message);\n        console.log('error', error)\n        console.log('receipt', receipt)\n      });\n\n  }\n\n  async isFollowedByUser(_address) {\n\n    for (let i = 0; i < this.state.allFollow.length; i++) {\n      if (this.state.allFollow[i] === _address) {\n        return true\n      }\n    }\n    return false;\n  }\n\n  async launch_toast(_msg) {\n    var _toast_text = document.getElementById(\"toast_text\")\n    _toast_text.innerText = _msg;\n\n    var x = document.getElementById(\"toast\")\n    x.className = \"show\";\n    setTimeout(function () { x.className = x.className.replace(\"show\", \"\"); }, 5000);\n\n  }\n\n\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      account: '',\n      userProfile: null,\n      isAccountCreated: true,\n      ourSocialMedia: null,\n      totalPostsCount: 0,\n      totalLoadedPostsCount: 0,\n      everyTimeLoadPostCount: 3,\n      isLoadingMorePost: false,\n      isAllPostLoaded: false,\n      maxCharctersInPost: 420,\n      maxCharctersInComment: 220,\n      allPosts: [],\n      allFollow: [],\n      loading: true,\n      connected: true\n    }\n    this.createAccount = this.createAccount.bind(this)\n    this.createPost = this.createPost.bind(this)\n    this.tipPost = this.tipPost.bind(this)\n    this.follow = this.follow.bind(this)\n    this.isFollowedByUser = this.isFollowedByUser.bind(this)\n    this.loadMorePost = this.loadMorePost.bind(this)\n  }\n\n\n  render() {\n    return (\n      // <Router>\n<HashRouter>\n        <OSMcontext.Provider value={{\n          account: this.state.account,\n          ourSocialMedia: this.state.ourSocialMedia,\n          isAccountCreated: this.state.isAccountCreated,\n          everyTimeLoadPostCount: this.state.everyTimeLoadPostCount,\n          maxCharctersInPost: this.state.maxCharctersInPost,\n          maxCharctersInComment: this.state.maxCharctersInComment,\n          isFollowedByUser: this.isFollowedByUser,\n          tipPost: this.tipPost,\n          follow: this.follow\n        }}>\n          <div className=\"\" >\n            {this.state.connected\n              ?\n              <>\n                <Navbar userProfile={this.state.userProfile} />\n                {this.state.loading\n                  ?\n                  <div className=\"text-center m-5\" >\n                    <div className=\"spinner-border bg-light m-auto\" role=\"status\">\n                    </div>\n                  </div>\n                  :\n                  <Switch>\n                    <Route path=\"/\" exact>\n                      <TopFollowTo allFollow={this.state.allFollow} />\n                      <Main allPosts={this.state.allPosts} loadMorePost={this.loadMorePost} isAllPostLoaded={this.state.isAllPostLoaded} isLoadingMorePost={this.state.isLoadingMorePost} />\n                    </Route>\n                    <Route path=\"/postsOf/:userid\" exact>\n                      <TopFollowTo allFollow={this.state.allFollow} />\n                      <PostOf />\n                    </Route>\n                    <Route path=\"/createPost\" exact>\n                      {this.state.isAccountCreated\n                        ?\n                        <CreatePost createPost={this.createPost} />\n                        :\n                        <>\n                          <div class=\"mx-5 alert alert-warning\" role=\"alert\">\n                            Please First Create Account!\n                          </div>\n                          <CreateAccount createAccount={this.createAccount} />\n                        </>\n                      }\n                    </Route>\n                    <Route path=\"/profile/:userid\" exact>\n                      <Profile />\n                    </Route>\n                    <Route path=\"/createProfile\" exact>\n                      {this.state.isAccountCreated\n                        ?\n                        <>\n                          <div class=\"mx-5 alert alert-success\" role=\"alert\">\n                            Your Profile is already created!\n                          </div>\n                          <TopFollowTo allFollow={this.state.allFollow} />\n                          <Main allPosts={this.state.allPosts} loadMorePost={this.loadMorePost} isAllPostLoaded={this.state.isAllPostLoaded} isLoadingMorePost={this.state.isLoadingMorePost} />\n                        </>\n                        :\n                        <CreateAccount createAccount={this.createAccount} />\n                      }\n                    </Route>\n                  </Switch>\n                }\n\n                <div id=\"toast\"><div id=\"toast_img\">Icon</div><div id=\"toast_text\"></div></div>\n              </>\n              :\n              <NotConnected />\n            }\n          </div>\n        </OSMcontext.Provider>\n      {/* </Router> */}\n      </HashRouter>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}